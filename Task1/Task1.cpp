#include <iostream>
#include <string>
#include <map>
#include <fcntl.h>

/**
 * @brief Программа-телеграф: переводит русское сообщение в азбуку Морзе.
 *
 * Использует широкие строки и потоки для поддержки Юникода и русской локали.
 * Поддерживаются буквы русского алфавита (верхний и нижний регистр), пробелы между словами.
 * Прочие символы игнорируются.
 *
 * Разделение:
 * - Буквы разделяются одним пробелом
 * - Слова разделяются символом `/`
 *
 * @return int Код завершения программы (0 - успешно)
 */
int main() {
    std::setlocale(LC_ALL, "");
    _setmode(_fileno(stdout), _O_U16TEXT);
    std::map<wchar_t, std::wstring> morse = {
            {L'А', L".-"},    {L'Б', L"-..."},  {L'В', L".--"},   {L'Г', L"--."},
            {L'Д', L"-.."},   {L'Е', L"."},     {L'Ж', L"...-"},  {L'З', L"--.."},
            {L'И', L".."},    {L'Й', L".---"},  {L'К', L"-.-"},   {L'Л', L".-.."},
            {L'М', L"--"},    {L'Н', L"-."},    {L'О', L"---"},   {L'П', L".--."},
            {L'Р', L".-."},   {L'С', L"..."},   {L'Т', L"-"},     {L'У', L"..-"},
            {L'Ф', L"..-."},  {L'Х', L"...."},  {L'Ц', L"-.-."},  {L'Ч', L"---."},
            {L'Ш', L"----"},  {L'Щ', L"--.-"},  {L'Ъ', L".--.-."},{L'Ы', L"-.--"},
            {L'Ь', L"-..-"},  {L'Э', L"..-.."}, {L'Ю', L"..--"},  {L'Я', L".-."}
    };

    std::wcout << L"Введите сообщение на русском языке: ";
    std::wstring message;
    std::getline(std::wcin, message);

    std::wcout << L"Сообщение в азбуке Морзе:\n";

    for (wchar_t ch : message) {
        if (ch == L' ') {
            std::wcout << L"/ ";
        } else {
            wchar_t upperCh = std::towupper(ch);
            if (morse.count(upperCh)) {
                std::wcout << morse[upperCh] << L" ";
            }
        }
    }

    std::wcout << std::endl;
    return 0;
}